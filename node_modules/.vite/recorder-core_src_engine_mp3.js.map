{
  "version": 3,
  "sources": ["../recorder-core/src/engine/mp3.js", "dep:recorder-core_src_engine_mp3"],
  "sourcesContent": ["/*\nmp3\u7F16\u7801\u5668\uFF0C\u9700\u5E26\u4E0Asrc/engine/mp3-engine.js\u5F15\u64CE\u4F7F\u7528\nhttps://github.com/xiangyuecn/Recorder\n\n\u5F53\u7136\u6700\u4F73\u63A8\u8350\u4F7F\u7528mp3\u3001wav\u683C\u5F0F\uFF0C\u4EE3\u7801\u4E5F\u662F\u4F18\u5148\u7167\u987E\u8FD9\u4E24\u79CD\u683C\u5F0F\n\u6D4F\u89C8\u5668\u652F\u6301\u60C5\u51B5\nhttps://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats\n*/\n(function(factory){\n\tvar browser=typeof window==\"object\" && !!window.document;\n\tvar win=browser?window:Object; //\u975E\u6D4F\u89C8\u5668\u73AF\u5883\uFF0CRecorder\u6302\u8F7D\u5728Object\u4E0B\u9762\n\tvar rec=win.Recorder,ni=rec.i18n;\n\tfactory(rec,ni,ni.$T,browser);\n}(function(Recorder,i18n,$T,isBrowser){\n\"use strict\";\n\nvar SampleS=\"48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000\";\nvar BitS=\"8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160, 192, 224, 256, 320\";\nRecorder.prototype.enc_mp3={\n\tstable:true,takeEC:\"full\"\n\t,getTestMsg:function(){\n\t\treturn $T(\"Zm7L::\u91C7\u6837\u7387\u8303\u56F4\uFF1A{1}\uFF1B\u6BD4\u7279\u7387\u8303\u56F4\uFF1A{2}\uFF08\u4E0D\u540C\u6BD4\u7279\u7387\u652F\u6301\u7684\u91C7\u6837\u7387\u8303\u56F4\u4E0D\u540C\uFF0C\u5C0F\u4E8E32kbps\u65F6\u91C7\u6837\u7387\u9700\u5C0F\u4E8E32000\uFF09\",0,SampleS,BitS);\n\t}\n};\n\nvar NormalizeSet=function(set){\n\tvar bS=set.bitRate, sS=set.sampleRate,s=sS;\n\tif((\" \"+BitS+\",\").indexOf(\" \"+bS+\",\")==-1){\n\t\tRecorder.CLog($T(\"eGB9::{1}\u4E0D\u5728mp3\u652F\u6301\u7684\u53D6\u503C\u8303\u56F4\uFF1A{2}\",0,\"bitRate=\"+bS,BitS),3);\n\t}\n\tif((\" \"+SampleS+\",\").indexOf(\" \"+sS+\",\")==-1){//engine SmpFrqIndex\u51FD\u6570\u4F1A\u68C0\u6D4B\n\t\tvar arr=SampleS.split(\", \"),vs=[];\n\t\tfor(var i=0;i<arr.length;i++) vs.push({v:+arr[i],s:Math.abs(arr[i]-sS)});\n\t\tvs.sort(function(a,b){return a.s-b.s}); s=vs[0].v;\n\t\t\n\t\tset.sampleRate=s;\n\t\tRecorder.CLog($T(\"zLTa::sampleRate\u5DF2\u66F4\u65B0\u4E3A{1}\uFF0C\u56E0\u4E3A{2}\u4E0D\u5728mp3\u652F\u6301\u7684\u53D6\u503C\u8303\u56F4\uFF1A{3}\",0,s,sS,SampleS),3);\n\t}\n};\nvar ImportEngineErr=function(){\n\treturn $T.G(\"NeedImport-2\",[\"mp3.js\",\"src/engine/mp3-engine.js\"]);\n};\n//\u662F\u5426\u652F\u6301web worker\nvar HasWebWorker=isBrowser && typeof Worker==\"function\";\n\n\n\n//*******\u6807\u51C6UI\u7EBF\u7A0B\u8F6C\u7801\u652F\u6301\u51FD\u6570************\n\nRecorder.prototype.mp3=function(res,True,False){\n\t\tvar This=this,set=This.set,size=res.length;\n\t\tif(!Recorder.lamejs){\n\t\t\tFalse(ImportEngineErr()); return;\n\t\t};\n\t\t\n\t\t//\u4F18\u5148\u91C7\u7528worker\u7F16\u7801\uFF0C\u975Eworker\u65F6\u7528\u8001\u65B9\u6CD5\u63D0\u4F9B\u517C\u5BB9\n\t\tif(HasWebWorker){\n\t\t\tvar ctx=This.mp3_start(set);\n\t\t\tif(ctx){\n\t\t\t\tif(ctx.isW){\n\t\t\t\t\tThis.mp3_encode(ctx,res);\n\t\t\t\t\tThis.mp3_complete(ctx,True,False,1);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tThis.mp3_stop(ctx);\n\t\t\t};\n\t\t};\n\t\t\n\t\tNormalizeSet(set);\n\t\t//https://github.com/wangpengfei15975/recorder.js\n\t\t//https://github.com/zhuker/lamejs bug:\u91C7\u6837\u7387\u5FC5\u987B\u548C\u6E90\u4E00\u81F4\uFF0C\u4E0D\u71368k\u65F6\u6CA1\u6709\u58F0\u97F3\uFF0C\u6709\u95EE\u9898fix\uFF1Ahttps://github.com/zhuker/lamejs/pull/11\n\t\tvar mp3=new Recorder.lamejs.Mp3Encoder(1,set.sampleRate,set.bitRate);\n\t\t\n\t\tvar blockSize=57600;\n\t\tvar memory=new Int8Array(500000), mOffset=0;\n\t\t\n\t\tvar idx=0,isFlush=0;\n\t\tvar run=function(){\n\t\t\ttry{\n\t\t\t\tif(idx<size){\n\t\t\t\t\tvar buf=mp3.encodeBuffer(res.subarray(idx,idx+blockSize));\n\t\t\t\t}else{\n\t\t\t\t\tisFlush=1;\n\t\t\t\t\tvar buf=mp3.flush();\n\t\t\t\t};\n\t\t\t}catch(e){ //\u7CBE\u7B80\u4EE3\u7801\u8C03\u7528\u4E86abort\n\t\t\t\tconsole.error(e);\n\t\t\t\tif(!isFlush) try{ mp3.flush() }catch(r){ console.error(r) }\n\t\t\t\tFalse(\"MP3 Encoder: \"+e.message);\n\t\t\t\treturn;\n\t\t\t};\n\t\t\tvar bufLen=buf.length;\n\t\t\tif(bufLen>0){\n\t\t\t\tif(mOffset+bufLen>memory.length){\n\t\t\t\t\tvar tmp=new Int8Array(memory.length+Math.max(500000,bufLen));\n\t\t\t\t\ttmp.set(memory.subarray(0, mOffset));\n\t\t\t\t\tmemory=tmp;\n\t\t\t\t}\n\t\t\t\tmemory.set(buf,mOffset);\n\t\t\t\tmOffset+=bufLen;\n\t\t\t};\n\t\t\t\n\t\t\tif(idx<size){\n\t\t\t\tidx+=blockSize;\n\t\t\t\tsetTimeout(run);//\u5C3D\u91CF\u907F\u514D\u5361ui\n\t\t\t}else{\n\t\t\t\tvar data=[memory.buffer.slice(0,mOffset)];\n\t\t\t\t//\u53BB\u6389\u5F00\u5934\u7684\u6807\u8BB0\u4FE1\u606F\u5E27\n\t\t\t\tvar meta=mp3TrimFix.fn(data,mOffset,size,set.sampleRate);\n\t\t\t\tmp3TrimFixSetMeta(meta,set);\n\t\t\t\t\n\t\t\t\tTrue(data[0]||new ArrayBuffer(0),\"audio/mp3\");\n\t\t\t};\n\t\t};\n\t\trun();\n\t}\n\n\n//********\u8FB9\u5F55\u8FB9\u8F6C\u7801(Worker)\u652F\u6301\u51FD\u6570\uFF0C\u5982\u679C\u63D0\u4F9B\u5C31\u4EE3\u8868\u53EF\u80FD\u652F\u6301\uFF0C\u5426\u5219\u53EA\u652F\u6301\u6807\u51C6\u8F6C\u7801*********\n\n//\u5168\u5C40\u5171\u4EAB\u4E00\u4E2AWorker\uFF0C\u540E\u53F0\u4E32\u884C\u6267\u884C\u3002\u5982\u679C\u6BCF\u6B21\u90FD\u5F00\u4E00\u4E2A\u65B0\u7684\uFF0C\u7F16\u7801\u901F\u5EA6\u53EF\u80FD\u4F1A\u6162\u5F88\u591A\uFF0C\u53EF\u80FD\u662F\u6D4F\u89C8\u5668\u8FD0\u884C\u7F13\u5B58\u7684\u56E0\u7D20\uFF0C\u5E76\u4E14\u53EF\u80FD\u77AC\u95F4\u4EA7\u751F\u591A\u4E2A\u5E76\u884C\u64CD\u4F5C\u5360\u7528\u5927\u91CFcpu\nvar mp3Worker;\nRecorder.BindDestroy(\"mp3Worker\",function(){\n\tif(mp3Worker){\n\t\tRecorder.CLog(\"mp3Worker Destroy\");\n\t\tmp3Worker.terminate();\n\t\tmp3Worker=null;\n\t};\n});\n\n\nRecorder.prototype.mp3_envCheck=function(envInfo,set){//\u68C0\u67E5\u73AF\u5883\u4E0B\u914D\u7F6E\u662F\u5426\u53EF\u7528\n\tvar errMsg=\"\";\n\t//\u9700\u8981\u5B9E\u65F6\u7F16\u7801\u8FD4\u56DE\u6570\u636E\uFF0C\u6B64\u65F6\u9700\u8981\u68C0\u67E5\u662F\u5426\u53EF\u5B9E\u65F6\u7F16\u7801\n\tif(set.takeoffEncodeChunk){\n\t\tif(!newContext()){//\u6D4F\u89C8\u5668\u4E0D\u80FD\u521B\u5EFA\u5B9E\u65F6\u7F16\u7801\u73AF\u5883\n\t\t\terrMsg=$T(\"yhUs::\u5F53\u524D\u6D4F\u89C8\u5668\u7248\u672C\u592A\u4F4E\uFF0C\u65E0\u6CD5\u5B9E\u65F6\u5904\u7406\");\n\t\t};\n\t};\n\tif(!errMsg && !Recorder.lamejs){\n\t\terrMsg=ImportEngineErr();\n\t};\n\treturn errMsg;\n};\nRecorder.prototype.mp3_start=function(set){//\u5982\u679C\u8FD4\u56DEnull\u4EE3\u8868\u4E0D\u652F\u6301\n\treturn newContext(set);\n};\nvar openList={id:0};\nvar newContext=function(setOrNull,_badW){\n\t//\u72EC\u7ACB\u8FD0\u884C\u7684\u51FD\u6570\uFF0Cscope.wkScope worker.onmessage \u5B57\u7B26\u4E32\u4F1A\u88AB\u66FF\u6362\n\tvar run=function(e){\n\t\tvar ed=e.data;\n\t\tvar wk_ctxs=scope.wkScope.wk_ctxs;\n\t\tvar wk_lame=scope.wkScope.wk_lame;\n\t\tvar wk_mp3TrimFix=scope.wkScope.wk_mp3TrimFix;\n\t\t\n\t\tvar cur=wk_ctxs[ed.id];\n\t\tif(ed.action==\"init\"){\n\t\t\twk_ctxs[ed.id]={\n\t\t\t\tsampleRate:ed.sampleRate\n\t\t\t\t,bitRate:ed.bitRate\n\t\t\t\t,takeoff:ed.takeoff\n\t\t\t\t\n\t\t\t\t,pcmSize:0\n\t\t\t\t,memory:new Int8Array(500000), mOffset:0\n\t\t\t\t,encObj:new wk_lame.Mp3Encoder(1,ed.sampleRate,ed.bitRate)\n\t\t\t};\n\t\t}else if(!cur){\n\t\t\treturn;\n\t\t};\n\t\tvar addBytes=function(buf){\n\t\t\tvar bufLen=buf.length;\n\t\t\tif(cur.mOffset+bufLen>cur.memory.length){\n\t\t\t\tvar tmp=new Int8Array(cur.memory.length+Math.max(500000,bufLen));\n\t\t\t\ttmp.set(cur.memory.subarray(0, cur.mOffset));\n\t\t\t\tcur.memory=tmp;\n\t\t\t}\n\t\t\tcur.memory.set(buf,cur.mOffset);\n\t\t\tcur.mOffset+=bufLen;\n\t\t};\n\t\t\n\t\tswitch(ed.action){\n\t\tcase \"stop\":\n\t\t\tif(!cur.isCp) try{ cur.encObj.flush() }catch(e){ console.error(e) }\n\t\t\tcur.encObj=null;\n\t\t\tdelete wk_ctxs[ed.id];\n\t\t\tbreak;\n\t\tcase \"encode\":\n\t\t\tif(cur.isCp)break;\n\t\t\tcur.pcmSize+=ed.pcm.length;\n\t\t\ttry{\n\t\t\t\tvar buf=cur.encObj.encodeBuffer(ed.pcm);\n\t\t\t}catch(e){ //\u7CBE\u7B80\u4EE3\u7801\u8C03\u7528\u4E86abort\n\t\t\t\tcur.err=e;\n\t\t\t\tconsole.error(e);\n\t\t\t};\n\t\t\tif(buf && buf.length>0){\n\t\t\t\tif(cur.takeoff){\n\t\t\t\t\tworker.onmessage({action:\"takeoff\",id:ed.id,chunk:buf});\n\t\t\t\t}else{\n\t\t\t\t\taddBytes(buf);\n\t\t\t\t};\n\t\t\t};\n\t\t\tbreak;\n\t\tcase \"complete\":\n\t\t\tcur.isCp=1;\n\t\t\ttry{\n\t\t\t\tvar buf=cur.encObj.flush();\n\t\t\t}catch(e){ //\u7CBE\u7B80\u4EE3\u7801\u8C03\u7528\u4E86abort\n\t\t\t\tcur.err=e;\n\t\t\t\tconsole.error(e);\n\t\t\t};\n\t\t\tif(buf && buf.length>0){\n\t\t\t\tif(cur.takeoff){\n\t\t\t\t\tworker.onmessage({action:\"takeoff\",id:ed.id,chunk:buf});\n\t\t\t\t}else{\n\t\t\t\t\taddBytes(buf);\n\t\t\t\t};\n\t\t\t};\n\t\t\tif(cur.err){\n\t\t\t\tworker.onmessage({action:ed.action,id:ed.id\n\t\t\t\t\t,err:\"MP3 Encoder: \"+cur.err.message});\n\t\t\t\tbreak;\n\t\t\t};\n\t\t\t\n\t\t\tvar data=[cur.memory.buffer.slice(0,cur.mOffset)];\n\t\t\t//\u53BB\u6389\u5F00\u5934\u7684\u6807\u8BB0\u4FE1\u606F\u5E27\n\t\t\tvar meta=wk_mp3TrimFix.fn(data,cur.mOffset,cur.pcmSize,cur.sampleRate);\n\t\t\t\n\t\t\tworker.onmessage({\n\t\t\t\taction:ed.action\n\t\t\t\t,id:ed.id\n\t\t\t\t,blob:data[0]||new ArrayBuffer(0)\n\t\t\t\t,meta:meta\n\t\t\t});\n\t\t\tbreak;\n\t\t};\n\t};\n\t\n\tvar initOnMsg=function(isW){\n\t\tworker.onmessage=function(e){\n\t\t\tvar data=e; if(isW)data=e.data;\n\t\t\tvar ctx=openList[data.id];\n\t\t\tif(ctx){\n\t\t\t\tif(data.action==\"takeoff\"){\n\t\t\t\t\t//\u53D6\u8D70\u5B9E\u65F6\u751F\u6210\u7684mp3\u6570\u636E\n\t\t\t\t\tctx.set.takeoffEncodeChunk(new Uint8Array(data.chunk.buffer));\n\t\t\t\t}else{\n\t\t\t\t\t//complete\n\t\t\t\t\tctx.call&&ctx.call(data);\n\t\t\t\t\tctx.call=null;\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t};\n\tvar initCtx=function(){\n\t\tvar ctx={worker:worker,set:setOrNull};\n\t\tif(setOrNull){\n\t\t\tctx.id=++openList.id;\n\t\t\topenList[ctx.id]=ctx;\n\t\t\t\n\t\t\tNormalizeSet(setOrNull);\n\t\t\t\n\t\t\tworker.postMessage({\n\t\t\t\taction:\"init\"\n\t\t\t\t,id:ctx.id\n\t\t\t\t,sampleRate:setOrNull.sampleRate\n\t\t\t\t,bitRate:setOrNull.bitRate\n\t\t\t\t,takeoff:!!setOrNull.takeoffEncodeChunk\n\t\t\t\t\n\t\t\t\t,x:new Int16Array(5)//\u4F4E\u7248\u672C\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u5E8F\u5217\u5316TypedArray\n\t\t\t});\n\t\t}else{\n\t\t\tworker.postMessage({\n\t\t\t\tx:new Int16Array(5)//\u4F4E\u7248\u672C\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u5E8F\u5217\u5316TypedArray\n\t\t\t});\n\t\t};\n\t\treturn ctx;\n\t};\n\tvar scope,worker=mp3Worker;\n\t\n\t//\u975E\u6D4F\u89C8\u5668\uFF0C\u4E0D\u652F\u6301worker\uFF0C\u6216\u8005\u5F00\u542F\u5931\u8D25\uFF0C\u4F7F\u7528UI\u7EBF\u7A0B\u5904\u7406\n\tif(_badW || !HasWebWorker){\n\t\tRecorder.CLog($T(\"k9PT::\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301Web Worker\uFF0Cmp3\u5B9E\u65F6\u7F16\u7801\u5668\u8FD0\u884C\u5728\u4E3B\u7EBF\u7A0B\u4E2D\"),3);\n\t\tworker={ postMessage:function(ed){ run({data:ed}); } };\n\t\tscope={wkScope:{\n\t\t\twk_ctxs:{}, wk_lame:Recorder.lamejs, wk_mp3TrimFix:mp3TrimFix\n\t\t}};\n\t\tinitOnMsg();\n\t\treturn initCtx();\n\t};\n\t\n\ttry{\n\t\tif(!worker){\n\t\t\t//\u521B\u5EFA\u4E00\u4E2A\u65B0Worker\n\t\t\tvar onmsg=(run+\"\").replace(/[\\w\\$]+\\.onmessage/g,\"self.postMessage\");\n\t\t\tonmsg=onmsg.replace(/[\\w\\$]+\\.wkScope/g,\"wkScope\");\n\t\t\tvar jsCode=\");wk_lame();self.onmessage=\"+onmsg;\n\t\t\tjsCode+=\";var wkScope={ wk_ctxs:{},wk_lame:wk_lame\";\n\t\t\tjsCode+=\",wk_mp3TrimFix:{rm:\"+mp3TrimFix.rm+\",fn:\"+mp3TrimFix.fn+\"} }\";\n\t\t\t\n\t\t\tvar lamejsCode=Recorder.lamejs.toString();\n\t\t\tvar url=(window.URL||webkitURL).createObjectURL(new Blob([\"var wk_lame=(\",lamejsCode,jsCode], {type:\"text/javascript\"}));\n\t\t\t\n\t\t\tworker=new Worker(url);\n\t\t\tsetTimeout(function(){\n\t\t\t\t(window.URL||webkitURL).revokeObjectURL(url);//\u5FC5\u987B\u8981\u91CA\u653E\uFF0C\u4E0D\u7136\u6BCF\u6B21\u8C03\u7528\u5185\u5B58\u90FD\u660E\u663E\u6CC4\u9732\u5185\u5B58\n\t\t\t},10000);//chrome 83 file\u534F\u8BAE\u4E0B\u5982\u679C\u76F4\u63A5\u91CA\u653E\uFF0C\u5C06\u4F1A\u4F7FWebWorker\u65E0\u6CD5\u542F\u52A8\n\t\t\tinitOnMsg(1);\n\t\t};\n\t\t\n\t\tvar ctx=initCtx(); ctx.isW=1;\n\t\tmp3Worker=worker;\n\t\treturn ctx;\n\t}catch(e){//\u51FA\u9519\u4E86\u5C31\u4E0D\u8981\u63D0\u4F9B\u4E86\n\t\tworker&&worker.terminate();\n\t\tconsole.error(e);\n\t\treturn newContext(setOrNull, 1);//\u5207\u6362\u5230UI\u7EBF\u7A0B\u5904\u7406\n\t};\n};\nRecorder.prototype.mp3_stop=function(startCtx){\n\tif(startCtx&&startCtx.worker){\n\t\tstartCtx.worker.postMessage({\n\t\t\taction:\"stop\"\n\t\t\t,id:startCtx.id\n\t\t});\n\t\tstartCtx.worker=null;\n\t\tdelete openList[startCtx.id];\n\t\t\n\t\t//\u7591\u4F3C\u6CC4\u9732\u68C0\u6D4B \u6392\u9664id\n\t\tvar opens=-1;\n\t\tfor(var k in openList){\n\t\t\topens++;\n\t\t};\n\t\tif(opens){\n\t\t\tRecorder.CLog($T(\"fT6M::mp3 worker\u5269{1}\u4E2A\u672Astop\",0,opens),3);\n\t\t};\n\t};\n};\nRecorder.prototype.mp3_encode=function(startCtx,pcm){\n\tif(startCtx&&startCtx.worker){\n\t\tstartCtx.worker.postMessage({\n\t\t\taction:\"encode\"\n\t\t\t,id:startCtx.id\n\t\t\t,pcm:pcm\n\t\t});\n\t};\n};\nRecorder.prototype.mp3_complete=function(startCtx,True,False,autoStop){\n\tvar This=this;\n\tif(startCtx&&startCtx.worker){\n\t\tstartCtx.call=function(data){\n\t\t\tif(autoStop){\n\t\t\t\tThis.mp3_stop(startCtx);\n\t\t\t};\n\t\t\tif(data.err){\n\t\t\t\tFalse(data.err);\n\t\t\t}else{\n\t\t\t\tmp3TrimFixSetMeta(data.meta,startCtx.set);\n\t\t\t\tTrue(data.blob,\"audio/mp3\");\n\t\t\t};\n\t\t};\n\t\tstartCtx.worker.postMessage({\n\t\t\taction:\"complete\"\n\t\t\t,id:startCtx.id\n\t\t});\n\t}else{\n\t\tFalse($T(\"mPxH::mp3\u7F16\u7801\u5668\u672Astart\"));\n\t};\n};\n\n\n\n\n\n\n\n//*******\u8F85\u52A9\u51FD\u6570************\n\n/*\u8BFB\u53D6lamejs\u7F16\u7801\u51FA\u6765\u7684mp3\u4FE1\u606F\uFF0C\u53EA\u80FD\u8BFB\u7279\u5B9A\u683C\u5F0F\uFF0C\u5982\u679C\u8BFB\u53D6\u5931\u8D25\u8FD4\u56DEnull\nmp3Buffers=[ArrayBuffer,...]\nlength=mp3Buffers\u7684\u6570\u636E\u4E8C\u8FDB\u5236\u603B\u957F\u5EA6\n*/\nRecorder.mp3ReadMeta=function(mp3Buffers,length){\n\t//kill babel-polyfill ES6 Number.parseInt \u4E0D\u7136\u653E\u5230Worker\u91CC\u9762\u627E\u4E0D\u5230\u65B9\u6CD5\uFF0C\u4E5F\u4E0D\u80FD\u7528typeof(x)==object \u4F1A\u88AB\u66FF\u6362\u6210 _typeof\n\tvar parseInt_ES3=typeof(window)!=\"undefined\"&&window.parseInt||typeof(self)!=\"undefined\"&&self.parseInt||parseInt;\n\t\n\tvar u8arr0=new Uint8Array(mp3Buffers[0]||[]);\n\tif(u8arr0.length<4){\n\t\treturn null;\n\t};\n\tvar byteAt=function(idx,u8){\n\t\treturn (\"0000000\"+((u8||u8arr0)[idx]||0).toString(2)).substr(-8);\n\t};\n\tvar b2=byteAt(0)+byteAt(1);\n\tvar b4=byteAt(2)+byteAt(3);\n\t\n\tif(!/^1{11}/.test(b2)){//\u672A\u53D1\u73B0\u5E27\u540C\u6B65\n\t\treturn null;\n\t};\n\tvar version=({\"00\":2.5,\"10\":2,\"11\":1})[b2.substr(11,2)];\n\tvar layer=({\"01\":3})[b2.substr(13,2)];//\u4EC5\u652F\u6301Layer3\n\tvar sampleRate=({ //lamejs -> Tables.samplerate_table\n\t\t\"1\":[44100, 48000, 32000]\n\t\t,\"2\":[22050, 24000, 16000]\n\t\t,\"2.5\":[11025, 12000, 8000]\n\t})[version];\n\tsampleRate&&(sampleRate=sampleRate[parseInt_ES3(b4.substr(4,2),2)]);\n\tvar bitRate=[ //lamejs -> Tables.bitrate_table\n\t\t[0, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160] //MPEG 2 2.5\n\t\t,[0, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320]//MPEG 1\n\t][version==1?1:0][parseInt_ES3(b4.substr(0,4),2)];\n\t\n\tif(!version || !layer || !bitRate || !sampleRate){\n\t\treturn null;\n\t};\n\t\n\tvar duration=Math.round(length*8/bitRate);\n\tvar frame=layer==1?384:layer==2?1152:version==1?1152:576;\n\tvar frameDurationFloat=frame/sampleRate*1000;\n\tvar frameSize=Math.floor((frame*bitRate)/8/sampleRate*1000);\n\t\n\t//\u68C0\u6D4B\u662F\u5426\u5B58\u5728Layer3\u5E27\u586B\u51451\u5B57\u8282\u3002\u8FD9\u91CC\u53EA\u83B7\u53D6\u7B2C\u4E8C\u5E27\u7684\u586B\u5145\u4FE1\u606F\uFF0C\u9996\u5E27\u6C38\u8FDC\u6CA1\u6709\u586B\u5145\u3002\u5176\u4ED6\u5E27\u53EF\u80FD\u9694\u4E00\u5E27\u51FA\u73B0\u4E00\u4E2A\u586B\u5145\uFF0C\u6216\u8005\u9694\u5F88\u591A\u5E27\u51FA\u73B0\u4E00\u4E2A\u586B\u5145\uFF1B\u76EE\u6D4B\u662F\u53D6\u51B3\u4E8EframeSize\u672A\u820D\u5165\u65F6\u7684\u5C0F\u6570\u90E8\u5206\uFF0C\u56E0\u4E3A\u6709\u4E9B\u91C7\u6837\u7387\u7684frameSize\u4F1A\u51FA\u73B0\u5C0F\u6570\uFF0811025\u300122050\u300144100 \u5178\u578B\u7684\u9664\u4E0D\u5C3D\uFF09\uFF0C\u7136\u540E\u5B57\u8282\u6570\u65E0\u6CD5\u8868\u793A\u8FD9\u79CD\u5C0F\u6570\uFF0C\u5C31\u901A\u8FC7\u4E00\u5B9A\u6B65\u957F\u6765\u586B\u5145\u5F25\u8865\u5C0F\u6570\u90E8\u5206\u4E22\u5931\n\tvar hasPadding=0,seek=0;\n\tfor(var i=0;i<mp3Buffers.length;i++){\n\t\t//\u5BFB\u627E\u7B2C\u4E8C\u5E27\n\t\tvar buf=mp3Buffers[i];\n\t\tseek+=buf.byteLength;\n\t\tif(seek>=frameSize+3){\n\t\t\tvar buf8=new Uint8Array(buf);\n\t\t\tvar idx=buf.byteLength-(seek-(frameSize+3)+1);\n\t\t\tvar ib4=byteAt(idx,buf8);\n\t\t\thasPadding=ib4.charAt(6)==\"1\";\n\t\t\tbreak;\n\t\t};\n\t};\n\tif(hasPadding){\n\t\tframeSize++;\n\t};\n\t\n\t\n\treturn {\n\t\tversion:version //1 2 2.5 -> MPEG1 MPEG2 MPEG2.5\n\t\t,layer:layer//3 -> Layer3\n\t\t,sampleRate:sampleRate //\u91C7\u6837\u7387 hz\n\t\t,bitRate:bitRate //\u6BD4\u7279\u7387 kbps\n\t\t\n\t\t,duration:duration //\u97F3\u9891\u65F6\u957F ms\n\t\t,size:length //\u603B\u957F\u5EA6 byte\n\t\t,hasPadding:hasPadding //\u662F\u5426\u5B58\u57281\u5B57\u8282\u586B\u5145\uFF0C\u9996\u5E27\u6C38\u8FDC\u6CA1\u6709\uFF0C\u8FD9\u4E2A\u503C\u5176\u5B9E\u4EE3\u8868\u7684\u7B2C\u4E8C\u5E27\u662F\u5426\u6709\u586B\u5145\uFF0C\u5E76\u4E0D\u4EE3\u8868\u5176\u4ED6\u5E27\u7684\n\t\t,frameSize:frameSize //\u6BCF\u5E27\u6700\u5927\u957F\u5EA6\uFF0C\u542B\u53EF\u80FD\u5B58\u5728\u76841\u5B57\u8282padding byte\n\t\t,frameDurationFloat:frameDurationFloat //\u6BCF\u5E27\u65F6\u957F\uFF0C\u542B\u5C0F\u6570 ms\n\t};\n};\n\n//\u53BB\u6389lamejs\u5F00\u5934\u7684\u6807\u8BB0\u4FE1\u606F\u5E27\uFF0C\u514D\u5F97mp3\u89E3\u7801\u51FA\u6765\u7684\u65F6\u957F\u6BD4pcm\u7684\u957F\u592A\u591A\nvar mp3TrimFix={//minfiy keep name\nrm:Recorder.mp3ReadMeta\n,fn:function(mp3Buffers,length,pcmLength,pcmSampleRate){\n\tvar meta=this.rm(mp3Buffers,length);\n\tif(!meta){\n\t\treturn {err:\"mp3 unknown format\"};\n\t};\n\tvar pcmDuration=Math.round(pcmLength/pcmSampleRate*1000);\n\t\n\t//\u5F00\u5934\u591A\u51FA\u8FD9\u4E48\u591A\u5E27\uFF0C\u79FB\u9664\u6389\uFF1B\u6B63\u5E38\u60C5\u51B5\u4E0B\u6700\u591A\u4E3A2\u5E27\n\tvar num=Math.floor((meta.duration-pcmDuration)/meta.frameDurationFloat);\n\tif(num>0){\n\t\tvar size=num*meta.frameSize-(meta.hasPadding?1:0);//\u9996\u5E27\u6CA1\u6709\u586B\u5145\uFF0C\u7B2C\u4E8C\u5E27\u53EF\u80FD\u6709\u586B\u5145\uFF0C\u8FD9\u91CC\u5047\u8BBE\u6700\u591A\u4E3A2\u5E27\uFF08\u6D4B\u8BD5\u5E76\u672A\u51FA\u73B03\u5E27\u4EE5\u4E0A\u60C5\u51B5\uFF09\uFF0C\u5176\u4ED6\u5E27\u4E0D\u7BA1\uFF0C\u5C31\u7B97\u51FA\u73B0\u4E86\u5E76\u4E14\u5BFC\u81F4\u4E86\u9519\u8BEF\u540E\u9762\u81EA\u52A8\u5BB9\u9519\n\t\tlength-=size;\n\t\tvar arr0=0,arrs=[];\n\t\tfor(var i=0;i<mp3Buffers.length;i++){\n\t\t\tvar arr=mp3Buffers[i];\n\t\t\tif(size<=0){\n\t\t\t\tbreak;\n\t\t\t};\n\t\t\tif(size>=arr.byteLength){\n\t\t\t\tsize-=arr.byteLength;\n\t\t\t\tarrs.push(arr);\n\t\t\t\tmp3Buffers.splice(i,1);\n\t\t\t\ti--;\n\t\t\t}else{\n\t\t\t\tmp3Buffers[i]=arr.slice(size);\n\t\t\t\tarr0=arr;\n\t\t\t\tsize=0;\n\t\t\t};\n\t\t};\n\t\tvar checkMeta=this.rm(mp3Buffers,length);\n\t\tif(!checkMeta){\n\t\t\t//\u8FD8\u539F\u53D8\u66F4\uFF0C\u5E94\u8BE5\u4E0D\u592A\u53EF\u80FD\u4F1A\u51FA\u73B0\n\t\t\tarr0&&(mp3Buffers[0]=arr0);\n\t\t\tfor(var i=0;i<arrs.length;i++){\n\t\t\t\tmp3Buffers.splice(i,0,arrs[i]);\n\t\t\t};\n\t\t\tmeta.err=\"mp3 fix error: \u5DF2\u8FD8\u539F\uFF0C\u9519\u8BEF\u539F\u56E0\u4E0D\u660E\"; //worker\u91CC\u9762\u6CA1$T\u7FFB\u8BD1\n\t\t};\n\t\t\n\t\tvar fix=meta.trimFix={};\n\t\tfix.remove=num;\n\t\tfix.removeDuration=Math.round(num*meta.frameDurationFloat);\n\t\tfix.duration=Math.round(length*8/meta.bitRate);\n\t};\n\treturn meta;\n}\n};\nvar mp3TrimFixSetMeta=function(meta,set){\n\tvar tag=\"MP3 Info: \";\n\tif(meta.sampleRate&&meta.sampleRate!=set.sampleRate || meta.bitRate&&meta.bitRate!=set.bitRate){\n\t\tRecorder.CLog(tag+$T(\"uY9i::\u548C\u8BBE\u7F6E\u7684\u4E0D\u5339\u914D{1}\uFF0C\u5DF2\u66F4\u65B0\u6210{2}\",0,\"set:\"+set.bitRate+\"kbps \"+set.sampleRate+\"hz\",\"set:\"+meta.bitRate+\"kbps \"+meta.sampleRate+\"hz\"),3,set);\n\t\tset.sampleRate=meta.sampleRate;\n\t\tset.bitRate=meta.bitRate;\n\t};\n\t\n\tvar trimFix=meta.trimFix;\n\tif(trimFix){\n\t\ttag+=$T(\"iMSm::Fix\u79FB\u9664{1}\u5E27\",0,trimFix.remove)+\" \"+trimFix.removeDuration+\"ms -> \"+trimFix.duration+\"ms\";\n\t\tif(trimFix.remove>2){\n\t\t\tmeta.err=(meta.err?meta.err+\", \":\"\")+$T(\"b9zm::\u79FB\u9664\u5E27\u6570\u8FC7\u591A\");\n\t\t};\n\t}else{\n\t\ttag+=(meta.duration||\"-\")+\"ms\";\n\t};\n\t\n\tif(meta.err){\n\t\tRecorder.CLog(tag,1,meta.err,meta);\n\t}else{\n\t\tRecorder.CLog(tag,meta);\n\t};\n};\n\n\n\t\n}));", "export default require(\"./node_modules/recorder-core/src/engine/mp3.js\");"],
  "mappings": "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",
  "names": []
}
